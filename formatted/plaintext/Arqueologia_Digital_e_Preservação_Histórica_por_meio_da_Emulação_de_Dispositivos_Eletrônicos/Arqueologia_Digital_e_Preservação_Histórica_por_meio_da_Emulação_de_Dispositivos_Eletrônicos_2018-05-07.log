[2018-05-07 00:05:09] Ooooo Juca, tenho uma duvida sobre seu emulador do patinho
[2018-05-07 00:05:09] Vc colocou a declara√ß√£o da decwriter e da teletype direto no .cpp do driver, isso significa que os dispositivos de IO que t√£o la (Que s√£o s√≥ esses dois no momento?), t√£o hardcoded la, e por isso n da pra fazer aquela parada que da em outros emuladores de tirar coisas de slots e colocar outras coisas no lugar, tipo usar o patinho sem nada, ou colocar uma teletype, ou um leitor de cart√£o perfurado (Ou um sintetizador musical daor√£o)? Pelo menos n√£o sem mecher no c√≥digo manualmente e trocar os perif√©ricos?
[2018-05-07 00:05:09] Sei la, to tentando aprender a escrever coisa pro MAME ainda üòÖ
[2018-05-07 00:05:09] √© verdade
[2018-05-07 00:05:09] bora arrumar ?
[2018-05-07 00:05:09] Hell yeah
[2018-05-07 00:05:09] Faz sentido o que eu falei?
[2018-05-07 00:05:09] 100% !!!
[2018-05-07 00:05:09] √â algo que eu sei que eu deveria ter feito, mas ainda n√£o fiz
[2018-05-07 00:05:09] e n√£o sei exatamente como faz
[2018-05-07 00:05:09] teria que dar uma investigada na forma como o MAME implementa esses mecanismos de slots
[2018-05-07 00:05:09] e criar um sistema de slots com as caracter√≠sticas das interfaces de I/O do Pato
[2018-05-07 00:05:09] Tbem n√¢o
[2018-05-07 00:05:09] Mas eu dei uma olhadinha em outros arquivos
[2018-05-07 00:05:09] mas t√° cheio de c√≥digo de outros sistemas pra gente ler e tentar imitar
[2018-05-07 00:05:09] Especificamente na implementa√ß√£o da porta RS232 e do IO do hp80
[2018-05-07 00:05:09] e tem tamb√©m o IRC #mamedev
[2018-05-07 00:05:09] pra perguntar pros outros devs
[2018-05-07 00:05:09] Oh, verdade n√©
[2018-05-07 00:05:09] #mame-dev em irc.freenode.net
[2018-05-07 00:05:09] Olhando esses dois, o que parece funcionar √© escrever um slot device com as caracter√≠sticas da bus
[2018-05-07 00:05:09] e melhor ainda... tem o issue tracker do MAME no github para manter registrado o hist√≥rico da conversa
[2018-05-07 00:05:09] Perfeito! Acho que √© esse o caminho mesmo. Bora tentar ?
[2018-05-07 00:05:09] O q, colocar uma issue nova no /mamedev/mame com um Adding IO Slot System to Patinho Feio", ou algo do tipo?
[2018-05-07 00:05:09] talvez
[2018-05-07 00:05:09] Ou forkar um mame pra fazer especificamente isso/
[2018-05-07 00:05:09] ?
[2018-05-07 00:05:09] tamb√©m!
[2018-05-07 00:05:09] o mais importante √© arrega√ßar as mangas e come√ßar a tentar. Ou seja, forkar e esbo√ßar c√≥digo √© o passo zero.
[2018-05-07 00:05:09] mas quando enroscar em algo, acho justo abrir uma issue descrevendo os objetivos, as tentativas feitas e as duvidas que surgiram
[2018-05-07 00:05:09] Beleza, faz isso no arqueologia digital n?
[2018-05-07 00:05:09] pode ser!
[2018-05-07 00:05:09] haha
[2018-05-07 00:05:09] legal!
[2018-05-07 00:05:09] Beleza, vamo fazer essa parada a√≠
[2018-05-07 00:05:09] ent√£o fa√ßamos assim: faz l√° um fork do mamedev/mame em ArqueologiaDigital/mame
[2018-05-07 00:05:09] a√≠ a gente mant√©m o master do ArqDig em sync com o do mamedev, ou seja, √© proibido commitar direto no nosso master
[2018-05-07 00:05:09] criamos um branch patinhofeio onde iremos ter o "nosso master customizado com coisas do patinhofeio"
[2018-05-07 00:05:09] Faz uma branch pato?
[2018-05-07 00:05:09] Okay
[2018-05-07 00:05:09] patinhofeio
[2018-05-07 00:05:09] e a√≠ podemos usar esse branch patinhofeio pra mandar pull requestspro mamedev quando acharmos que t√° pronto
[2018-05-07 00:05:09] mas entre n√≥s podemos ter um workflow interno
[2018-05-07 00:05:09] por exemplo podemos comitar em nossos forks pessoais do ArqDig e mandar pull request pro ArqDig, assim a gente faz code-review entre n√≥s
[2018-05-07 00:05:09] por exemplo, hoje em dia eu tenho um felipesanches/mame
[2018-05-07 00:05:09] e posso continuar trabalhando nele e enviando PR pro ArqDig
[2018-05-07 00:05:09] faz sentido?
[2018-05-07 00:05:09] Pera, n entendi
[2018-05-07 00:05:09] Lembra que eu come√ßei a usar git a poquissimo tempo
[2018-05-07 00:05:09] a outra forma, supostamente mais simples, seria comitar direto no ArqDig, mas a√≠ rola um risco de avacalhar
[2018-05-07 00:05:09] pera√≠ que eu vou desenhar (literalmente)
[2018-05-07 00:05:09] Ahh, mas mesmo se cagar as coisas tem como voltar pra um commit anterior n tem?
[2018-05-07 00:05:09] üòÄüòÄüòÄüòÄüòÄüòÄ, boa
[2018-05-07 00:05:09] photo: /home/felipe/devel/github_ArqueologiaDigital/Telegram_logs/media/Arqueologia_Digital_e_Preserva√ß√£o_Hist√≥rica_por_meio_da_Emula√ß√£o_de_Dispositivos_Eletr√¥nicos/download_806124437_90228.jpg
[2018-05-07 00:05:09] Ahhhh
[2018-05-07 00:05:09] Entendi
[2018-05-07 00:05:09] no caso patinhofeio "+nome da feature" √© o que chamamos de feature-branches
[2018-05-07 00:05:09] ou seja, branches criados pontualmente s√≥ pra implementar algo bem espec√≠fico
[2018-05-07 00:05:09] eu tenho o costume de usar como nome para feature branches o pr√≥prio n√∫mero da issue que esteja tentando corrigir
[2018-05-07 00:05:09] por exemplo, no projeto fontbakery eu sempre crio branches com nomes do tipo "issue_1587"
[2018-05-07 00:05:09] Isso n fica meio pouco descritivo?
[2018-05-07 00:05:09] nao tem problema
[2018-05-07 00:05:09] E forks n tem issue tracker especifico?
[2018-05-07 00:05:09] na mensagem de commit eu incluo "(issue #1587)" e isso faz o github automaticamente adicionar  refer√™ncias cruzadas entre a p√°gina da issue e a mensagem de commit no hist√≥rico do reposit√≥rio
[2018-05-07 00:05:09] Ahhh, genial
[2018-05-07 00:05:09] acho que vc tem raz√£o de que isso provavelmente geraconfus√£o
[2018-05-07 00:05:09] pois eu sempre uso a numera√ß√£o das issues do repo upstream (o repo de onde forkei)
[2018-05-07 00:05:09] se o nosso repo tamb√©m tem issues, isso pode acabar bagun√ßando
[2018-05-07 00:05:09] (o lance das referencias em mensagens de commit)
[2018-05-07 00:05:09] Ahh, o que eu tava perguntando √© se tem, pq parece n ter
[2018-05-07 00:05:09] Tipo https://github.com/ArqueologiaDigital/mame
[2018-05-07 00:05:09] mas o nome dos feature-branches √© totalmente livre
[2018-05-07 00:05:10] d√° pra usar o nome que vc achar melhor na hora
[2018-05-07 00:05:10] eu s√≥ evito usar o mesmo nome do branch de onde forkei
[2018-05-07 00:05:10] por exemplo, se eu come√ßar a trabalhar em melhorias para o arqueologiadigital/mame (branch "patinhofeio") eu faria meus commits no felipesanches/mame (branch "patinhofeio-slots-io")
[2018-05-07 00:05:10] se vc for o primeiro a fazer algum  esbo√ßo de c√≥digo para slots de IO vc podefazer isso e mandar um Pull Request pro arqdig/mame e a√≠ eu reviso, dou palpites, etc
[2018-05-07 00:05:10] e quando eu achar que t√° OK, eu fa√ßo o merge do seu "patinho-slots-io" para o "patinhofeio" do arqdig
[2018-05-07 00:05:10] √© uma certa burocracia, mas √© √∫til para usarmos o sistema de code-review do github entre n√≥s sem ficamos perturbando o pessoal do pr√≥prio MAME upstream
[2018-05-07 00:05:10] E a√≠ quando vc achar quiser ce manda um pull request pro arqdig tbem e junta o seu codigo ao que ta la?
[2018-05-07 00:05:10] E no fim de tudo a gente manda o do arqdig pro mame?
[2018-05-07 00:05:10] ei! Acabei de perceber que estamos conversando em PVT. Esse tema √© super √∫til para o grupo. Vou mandar agora todas essas nossas mensagens pra l√° e continuamos a conversa em p√∫blico OK?
[2018-05-07 00:05:10] isso!!
[2018-05-07 00:05:10] OH, verdade, sempre esque√ßo disso
[2018-05-07 00:05:10] manda la]
[2018-05-07 00:05:10] beleza
[2018-05-07 00:06:51] Aten√ß√£o, pessoal! Come√ßou nessa mensagem aqui acima uma conversa em PVT, mas eu e o Affonso achamos melhor encaminh√°-la pra c√° pra voc√™s poderem participar tamb√©m! Happy Hacking!
[2018-05-07 00:08:54] Bom, o fork do mame ta la no repo do arqueologiadigital
[2018-05-07 00:09:09] https://github.com/ArqueologiaDigital/mame/tree/patinhofeio
[2018-05-07 00:10:27] Vo esbo√ßar uns bagulho aqui, olhando pra como os io Slots do hp80_io, rs232 e do centronics foram feitos
[2018-05-07 00:10:45] legal
[2018-05-07 00:11:15] faz algum rascunho inicial a√≠ e abre um pull request com suas primeiras tentativas e da√≠ em diante a gente vai fazendo o bate-bola
[2018-05-07 00:12:09] sem pressa, √© claro
[2018-05-07 00:13:40] Claro
[2018-05-07 00:13:46] tem uma outra dica de uso do git que √© o lance dos remotes
[2018-05-07 00:13:59] um remote √© uma refer√™ncia a outro reposit√≥rio
[2018-05-07 00:14:27] Como assim?
[2018-05-07 00:15:22] quando voc√™ faz "git clone" de um repo do github, por exemplo, o git cria automaticamente na configura√ß√£o do seu reposit√≥rio local um remote chamado "origin" apontando pro repo que vc clonou
[2018-05-07 00:16:15] vc pode listar quais remotes est√£o configurados usando o comando git remote -v
[2018-05-07 00:16:25] olha o output do meu:
[2018-05-07 00:16:45] photo: /home/felipe/devel/github_ArqueologiaDigital/Telegram_logs/media/Arqueologia_Digital_e_Preserva√ß√£o_Hist√≥rica_por_meio_da_Emula√ß√£o_de_Dispositivos_Eletr√¥nicos/download_806117657_89316.jpg
[2018-05-07 00:17:32] O meu ta s√≥ os dois origins
[2018-05-07 00:17:50] eu vou adicionar mais um remote aqui pra apontar pro repo do arqdig agora, vou te mostrar aqui como faz
[2018-05-07 00:17:59] pera√≠
[2018-05-07 00:18:05] Okay
[2018-05-07 00:19:13] photo: /home/felipe/devel/github_ArqueologiaDigital/Telegram_logs/media/Arqueologia_Digital_e_Preserva√ß√£o_Hist√≥rica_por_meio_da_Emula√ß√£o_de_Dispositivos_Eletr√¥nicos/download_806022555_16876.jpg
[2018-05-07 00:19:41] Oooookay, e fazer isso possibilita fazer o que?
[2018-05-07 00:19:53] j√° vou mostrar...
[2018-05-07 00:19:57] s√≥ um segundo
[2018-05-07 00:21:07] photo: /home/felipe/devel/github_ArqueologiaDigital/Telegram_logs/media/Arqueologia_Digital_e_Preserva√ß√£o_Hist√≥rica_por_meio_da_Emula√ß√£o_de_Dispositivos_Eletr√¥nicos/download_806022356_17016.jpg
[2018-05-07 00:22:33] o comando git fetch <nome-do-remote> faz o download de tudo o que tem de novidade no remote especificado e que ainda n√£o est√° dispon√≠vel no seu repo local.
[2018-05-07 00:22:48] apenas faz o download, mas n√£o aplica
[2018-05-07 00:23:31] ou seja, apenas transfere os dados pela rede de um repo remoto pro seu repo local mas sem alterar o entado de nenhum dos seus branches
[2018-05-07 00:24:42] como eu j√° tinha meu repo forkado do mamedev e eu tinha sincronizado ele ontem, significa que o repo novo que vc acabou decriar no ArqueologiaDigital provavelmente cont√©m commits novos que a galera do MAME fez de ontem pra hoje
[2018-05-07 00:25:26] isso √© algo que veio agora pela rede pra mim por meio do remote arqdig quando dei esse comando git fetch arqdig
[2018-05-07 00:25:53] vamos agora comparar o que tem no meu master e o que tem no master do arqdig:
[2018-05-07 00:27:56] git log (implicitamente isso equivale a git log master referindo seao branch "master" do meu repo local) me mostra esse commit de ontem:
[2018-05-07 00:28:05] photo: /home/felipe/devel/github_ArqueologiaDigital/Telegram_logs/media/Arqueologia_Digital_e_Preserva√ß√£o_Hist√≥rica_por_meio_da_Emula√ß√£o_de_Dispositivos_Eletr√¥nicos/download_806010698_35412.jpg
[2018-05-07 00:29:04] j√° o comando git log arqdig/master me mostra esse outro commit, bem mais recente:
[2018-05-07 00:29:10] photo: /home/felipe/devel/github_ArqueologiaDigital/Telegram_logs/media/Arqueologia_Digital_e_Preserva√ß√£o_Hist√≥rica_por_meio_da_Emula√ß√£o_de_Dispositivos_Eletr√¥nicos/download_806121102_90497.jpg
[2018-05-07 00:30:10] pra atualizar o meu master local com o master do arqdig eu posso usar o comando git rebase arqdig/master:
[2018-05-07 00:31:01] photo: /home/felipe/devel/github_ArqueologiaDigital/Telegram_logs/media/Arqueologia_Digital_e_Preserva√ß√£o_Hist√≥rica_por_meio_da_Emula√ß√£o_de_Dispositivos_Eletr√¥nicos/download_806118806_89642.jpg
[2018-05-07 00:31:11] E a√≠ todas essas altera√ß√µes que ce n tinha pegado vao pra sua master local
[2018-05-07 00:31:14] Saquei
[2018-05-07 00:31:21] isso
[2018-05-07 00:33:09] o rebase na verdade faz uma coisa extra, que aqui nao aconteceu, mas que poderia acontecer em outros casos. A id√©ia do rebase √© permitir que voc√™ temporariamente retire do seu branch atual qualquer commit novo que vc tenha feito localmente, depois aplique os commits do remote e, em seguida, re-aplique seus commits (cruzando os dedos pra n√£o dar conflitos)
[2018-05-07 00:34:15] √â da√≠ que vem o nome "rebase". Por que ele re-anexa os commits do seu branch atual no final do hist√≥rico do branch de um remote que vc especificar
[2018-05-07 00:34:26] pra evitar o uso de "commits de merge"
[2018-05-07 00:34:39] que poluem o hist√≥rico
[2018-05-07 00:35:50] a gente s√≥ faz rebase em coisas que a gente n√£o tornou p≈©blico ainda, pois rebase √© basicamente re-escrever a hist√≥ria do repo, adulterando a ordem dos commits para parecer que os seus foram feitos todos por √∫ltimo
[2018-05-07 00:36:59] reordenar coisas num repo publico pode confundir os reposit√≥rios de outros programadores
[2018-05-07 00:38:14] talvez eu tenha explicado r√°pido demais. Avisa a√≠ se precisar esclarecer algo
[2018-05-07 00:38:34] Faz sentido
[2018-05-07 00:38:37] Thanks
[2018-05-07 00:39:04] para o seu rascunho de slots de i/o pro patinho feio vc precisaria agora fazer o seguinte:
[2018-05-07 00:39:42] Eu ia te perguntar como upar as diferen√ßas pro arqdig
[2018-05-07 00:42:39] photo: /home/felipe/devel/github_ArqueologiaDigital/Telegram_logs/media/Arqueologia_Digital_e_Preserva√ß√£o_Hist√≥rica_por_meio_da_Emula√ß√£o_de_Dispositivos_Eletr√¥nicos/download_804723749_192169.jpg
[2018-05-07 00:43:55] "origin" no caso √© o seu repo pessoal no github
[2018-05-07 00:47:19] depois que vc abre um pull request, qualquer novo commit que voc√™ adicionar no seu branch local ir√° aparecer automaticamente na p√°gina do pull request assim que voc√™ executar novamente um git push origin/patinho-io-slots
[2018-05-07 00:48:05] assim d√° pra ir aprimorando o c√≥digo em fun√ß√£o dos feedbacks que voc√™ receber a partir dos coment√°rios que outros usu√°rios fizerem na p√°gina do pull request
[2018-05-07 00:48:23] e todo mundo pode ver as altera√ß√µes na ordem em que elas v√£o sendo tornadas p√∫blicas
[2018-05-07 00:49:32] como n√≥s dois somos admins do ArqueologiaDigital, n√≥s poder√≠amos, em teoria(ena pr√°ticatamb√©m!), fazer commits direto l√°, e tamb√©m fazer merge dos nossos pr√≥prios pull requests
[2018-05-07 00:50:33] mas como nesse caso eu estou te dando mentoria, faz sentido voc√™ abdicar de fazer merge do pull request e esperar que eu fa√ßa o code-review e tome a decisao de dar o merge quando estiver bom o suficiente
[2018-05-07 00:51:04] acho que esse pode ser um sisteminha legal para colaborar
[2018-05-07 00:51:08] Sure
[2018-05-07 00:51:31] bom... vou dormir agora. T√© mais e Happy Hacking! :-D
[2018-05-07 00:51:46] Beleza :), t√© mais
[2018-05-07 00:51:55] Eu vo brincar aqui um poco e ver o que eu consigo fazer
[2018-05-07 00:52:01] legal
[2018-05-07 00:52:48] Pra quem chegar atrasado, essa aqui foi uma conversa bem legal que come√ßou l√° em cima, √≥! :-D
[2018-05-07 01:22:39] Eu escrevi aqui um rascunho bem preliminar, que √© efetivamente uma c√≥pia descarada do c√≥digo feito pra emular a porta paralela centronics
[2018-05-07 01:22:52] J√° que a porta paralela √© a mais simples, achei que seria um bom come√ßo
[2018-05-07 01:23:03] Pelo menos pra pegar as ideias de devices e dos macros que s√£o usados
[2018-05-07 01:23:12] Depois da pra transformar isso em qualquer coisa
[2018-05-07 01:23:35] Tem muita coisa pra entender ainda
[2018-05-07 01:25:17] maravilha!
[2018-05-07 01:25:51] comita como "work in progress" e abre la um pull request
[2018-05-07 01:26:36] n√£o se preocupe muito com a qualidade do c√≥digo ou com as mensagens de log
[2018-05-07 01:27:03] podemos depois juntar tudo num commit s√≥ omitindo os erros e botando uma mensagem de log boa pro upstream
[2018-05-07 01:27:14] por enquanto estamos no nosso "safe space"
[2018-05-07 01:27:26] e podemos fazer os commits sem tanto rigor
[2018-05-07 01:27:40] d√° pra re-escrever a hist√≥ria antes de submeter pro mamedev
[2018-05-07 01:28:37] mas √© claro que n√£o custa nada escrever mensagens de log boas j√° agora (mesmo que a gente saiba que elas podem n√£o ser as definitivas)
[2018-05-07 01:36:45] Ta la
[2018-05-07 01:37:00] Veja se deu certo, eu vo dormir, pq tem aula amanha üòÖ
[2018-05-07 01:37:23] ok
[2018-05-07 01:37:27] s√≥ uma coisa...
[2018-05-07 01:37:38] me bora de colaborador nesse repo tamb√©m
[2018-05-07 01:37:52] pra eu poder renomear pull requests
[2018-05-07 01:37:54] e dar merge
[2018-05-07 01:37:55] etc
[2018-05-07 01:38:27] ah nao! Talvez eu j√° esteja l√°. Acabei de ver que n√£o to logado
[2018-05-07 01:38:32] vou logar pra ver se rola
[2018-05-07 01:40:16] consegui
[2018-05-07 01:40:31] https://github.com/ArqueologiaDigital/mame/pull/1
[2018-05-07 10:57:52] Grupo para usu√°rios de MIST/MISTICA FPGA:
[2018-05-07 10:57:55] https://t.me/joinchat/CMP6YFKT1S8tSebvUqpF-A
