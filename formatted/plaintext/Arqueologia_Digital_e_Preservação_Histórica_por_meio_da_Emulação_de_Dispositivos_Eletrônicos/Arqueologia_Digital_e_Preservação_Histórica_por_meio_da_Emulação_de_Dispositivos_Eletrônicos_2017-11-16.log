[2017-11-16 00:00:10] o MAME soh tem o 8275
[2017-11-16 00:00:46] mas acho que eh relativamente simles implementar o 8276 herdando o codigo do 8275
[2017-11-16 00:01:11] a diferenca eh soh desabilitar light-pen e DMA
[2017-11-16 00:02:27] Parece haver pouqu√≠ssimas diferen√ßas entre os dois
[2017-11-16 00:05:00] Eu diria q as diferen√ßas se resumem aos pinos 5, 6, 11, 38, 39
[2017-11-16 00:05:42] Meu instinto me diz q s√£o intercambiaveis.
[2017-11-16 00:08:18] 5/6/31 s√£o exatamente a mesma coisa nos dois - s√≥ muda a designa√ß√£o do pino.
[2017-11-16 00:09:25] Vc est√° certo.
[2017-11-16 00:10:15] Qdo tiver terminado essa implementa√ß√£o do Lepus no Mame, vc vai subir?
[2017-11-16 08:05:44] photo: /home/felipe/devel/github_ArqueologiaDigital/Telegram_logs/media/Arqueologia_Digital_e_Preserva√ß√£o_Hist√≥rica_por_meio_da_Emula√ß√£o_de_Dispositivos_Eletr√¥nicos/download_804725846_69688.jpg
[2017-11-16 08:44:41] "mau contato" ... :-(
[2017-11-16 08:47:45] The Xerox Alto Struts Its Stuff on Its 40th Birthday - IEEE Spectrum
https://www.spectrum.ieee.org/view-from-the-valley/tech-history/silicon-revolution/the-xerox-alto-struts-its-stuff-on-its-40th-birthday
[2017-11-16 08:52:24] D√° um desconto, o cara era franc√™s.
[2017-11-16 08:58:37] Lucas joined with an invite link
[2017-11-16 08:59:27] Lucas Barros de SP! Aprendiz de maker ... e curioso
[2017-11-16 08:59:30] bom dia a todos
[2017-11-16 09:29:56] Ol√°, Lucas! Conte um pouco pra gente sobre seus interesses em retrocomputa√ß√£o e como voc√™ acredita que pode ajudar em esfor√ßos de preserva√ß√£o da hist√≥ria da computa√ß√£o.
[2017-11-16 09:40:29] document: /home/felipe/devel/github_ArqueologiaDigital/Telegram_logs/media/Arqueologia_Digital_e_Preserva√ß√£o_Hist√≥rica_por_meio_da_Emula√ß√£o_de_Dispositivos_Eletr√¥nicos/download_4929364318153080864.txt
[2017-11-16 09:40:33] Acho que consegui dissassembler o in√≠cio da EProm do Lepus.
[2017-11-16 09:43:17] Alguns endere√ßos: 0000-0FFF EProm, 4000-47FF Ram, A000 e A001 USART 8251, D000 e D001 8275 (acabo de ver que t√° errado o EQU no in√≠cio do arquivo)
[2017-11-16 09:43:36] N√£o creio que d√™ para compilar, estou editando manualmente a sa√≠da de um dissassembler
[2017-11-16 09:44:29] Mais um dias e vou estar lendo e escrevendo Assembly 8085 fluentemente de novo...
[2017-11-16 09:44:42] hehe
[2017-11-16 09:45:01] e o endere√ßo E000 ?
[2017-11-16 09:45:18] Ainda n√£o apareceu na parte que eu decifrei...
[2017-11-16 09:45:46] Mas acho que peguei as interrup√ß√µes, o que vai facilitar bastante.
[2017-11-16 09:49:24] acho que E000 e E001 podem ser os 2 conjuntos de dip-switches
[2017-11-16 09:53:49] se for isso mesmo entao o mapa de mem√≥ria ficaria assim:
[2017-11-16 09:53:57] photo: /home/felipe/devel/github_ArqueologiaDigital/Telegram_logs/media/Arqueologia_Digital_e_Preserva√ß√£o_Hist√≥rica_por_meio_da_Emula√ß√£o_de_Dispositivos_Eletr√¥nicos/download_804726600_48450.jpg
[2017-11-16 09:58:03] n√£o... e000 nao pode ser dipswitch por que tem escrita nesse endere√ßo
[2017-11-16 09:58:32] photo: /home/felipe/devel/github_ArqueologiaDigital/Telegram_logs/media/Arqueologia_Digital_e_Preserva√ß√£o_Hist√≥rica_por_meio_da_Emula√ß√£o_de_Dispositivos_Eletr√¥nicos/download_804730068_48010.jpg
[2017-11-16 09:59:48] talvez e000 seja o endere√ßo usado para escrever na VRAM do 8276, enquanto os endere√≥s d000 e d001 sao apenas para o envio de comandos de configura√ßao ?
[2017-11-16 10:00:38] por que o 8275 copia o conte√∫do da mem√≥ria principal do sistema para a VRAM interna ao chip por mei ode DMA
[2017-11-16 10:01:00] mas o 8276 nao tem suporte a DMA
[2017-11-16 10:01:13] entao os dados de video precisam ser enviados de outra forma
[2017-11-16 10:01:29] e suspeito que possa ser por meio desse endere√ßo e000
[2017-11-16 10:07:26] Eu estou olhando pelo outro lado. As dips determinam alguns par√¢metros seriais, portanto influenciam na programa√ß√£o da 8251. J√° descobri que a vari√°vel em 47B8 cont√©m o comando atual da 8251. Estou tentando achar a inicia√ß√£o da 8251.
[2017-11-16 10:11:24] acho que esses aqui sao os endere√ßos que voc√™ pode analisar em busca da rotina de inicializa√ß√£o do Intel 8251:
[2017-11-16 10:11:31] photo: /home/felipe/devel/github_ArqueologiaDigital/Telegram_logs/media/Arqueologia_Digital_e_Preserva√ß√£o_Hist√≥rica_por_meio_da_Emula√ß√£o_de_Dispositivos_Eletr√¥nicos/download_804724457_69787.jpg
[2017-11-16 10:14:39] Parece que a rotina come√ßa em 07D6...
[2017-11-16 10:43:42] A leitura de E000 e E001 l√™ as dip switches
[2017-11-16 10:44:45] S√©rio mesmo ?!
[2017-11-16 10:44:56] Mas tem escrita no endere√ßo E000 !
[2017-11-16 10:45:52] Ent√£o, o sinal de escrita direciona para outro componente.
[2017-11-16 10:46:02] √©...
[2017-11-16 10:46:04] pode ser
[2017-11-16 10:46:10] eu tava pensando sobre isso
[2017-11-16 10:46:24] Deixa eu conseguir entender a programa√ß√£o da paridade, que eu tento achar a escrita..
[2017-11-16 10:46:48] Mas talvez eu tenha que encostar para trabalhar um pouco ;)
[2017-11-16 10:46:49] e minha intui√ß√£o √© de que a escrita vai para a VRAM interna do 8276
[2017-11-16 10:47:05] faz parte haha
[2017-11-16 11:25:05] √â isso a√≠ mesmo! Precis√°vamos d um assim msm.
[2017-11-16 11:30:31] Precis√°vamos de um desses com "bom contato" :-D
[2017-11-16 11:31:11] sim
[2017-11-16 11:31:17] mas o "mau" contato a gente arruma
[2017-11-16 11:31:21] üòä
[2017-11-16 11:31:57] Tem um outro junto, agora entendi porque (n√£o tinha reparado na anota√ß√£o, ficou vis√≠vel com a foto)
[2017-11-16 11:33:34] @fsanches o q tem escrito na caixa daquele seu db9<->usb mesmo (fabricante/site/modelo)?
[2017-11-16 11:35:10] Bom dia DQ! Obrigado pelo disasm... üëçüèª Vou buscar no bin onde a instru√ß√£o do SIM pro 8085 √© feita pra gente conseguir "quebrar" o m√©todo de endere√ßamento dos perif√©ricos codificado naquelas duas proms...
[2017-11-16 11:40:15] Na vdd o ideal seria eu rodar o c√≥d. de emula√ß√£o q o @fsanches tem no MAME em modo disassembler, pra poder ver o assembly e ir acompanhando.
[2017-11-16 11:41:41] mas por enqto vou deixar o DQ seguir com esse trabalho. N√£o quero meter a colher onde tem gente com mais compet√™ncia do q eu j√° fazendo isso.
[2017-11-16 11:42:41] Eu gosto mais de trabalhar de modo est√°tico. O SIM √© usado quando transfere dados para a 8275, por exemplo em 01E5
[2017-11-16 11:45:01] Acho que 019D √© onde ele copia dados da mem√≥ria para o 8275, usando POPs. Em 1E5 ele aproveita para limpara a linha, usando pushs.
[2017-11-16 11:45:11] Preciso ler este application note:
[2017-11-16 11:45:33] document: /home/felipe/devel/github_ArqueologiaDigital/Telegram_logs/media/Arqueologia_Digital_e_Preserva√ß√£o_Hist√≥rica_por_meio_da_Emula√ß√£o_de_Dispositivos_Eletr√¥nicos/download_4931616117966766102.pdf
[2017-11-16 11:46:21] √â a inspira√ß√£o para o hardware do Lepus
[2017-11-16 11:54:56] photo: /home/felipe/devel/github_ArqueologiaDigital/Telegram_logs/media/Arqueologia_Digital_e_Preserva√ß√£o_Hist√≥rica_por_meio_da_Emula√ß√£o_de_Dispositivos_Eletr√¥nicos/download_804724168_70387.jpg
[2017-11-16 11:56:11] photo: /home/felipe/devel/github_ArqueologiaDigital/Telegram_logs/media/Arqueologia_Digital_e_Preserva√ß√£o_Hist√≥rica_por_meio_da_Emula√ß√£o_de_Dispositivos_Eletr√¥nicos/download_804729698_48277.jpg
[2017-11-16 11:59:56] Aqui est√° a parte m√°gica:
[2017-11-16 12:00:01] photo: /home/felipe/devel/github_ArqueologiaDigital/Telegram_logs/media/Arqueologia_Digital_e_Preserva√ß√£o_Hist√≥rica_por_meio_da_Emula√ß√£o_de_Dispositivos_Eletr√¥nicos/download_804724489_69699.jpg
[2017-11-16 12:09:00] isso isso isso
[2017-11-16 12:09:29] √©... isso a√≠ √© bem familiar...
[2017-11-16 12:09:40] S√≥ q me parece q as linhas de endere√ßo usadas no Lepus s√£o diferentes
[2017-11-16 12:09:42] vi algo assim ontem l√° no circuito do lepus 200
[2017-11-16 12:10:00] Em especial, temos a linha A0 conectada ao pino serial do 8085
[2017-11-16 12:10:04] s√≥ que olepus usa o 8276 e nao o 8275
[2017-11-16 12:10:14] me corrija se eu estiver errado, @fsanches
[2017-11-16 12:10:23] Estou puxando da mem√≥ria
[2017-11-16 12:10:27] acho que eh isso mesmo
[2017-11-16 12:11:13] as entradas A4/A3/A2 est√£o ligadas respectivamente √†s linhas A15/A14/A13
[2017-11-16 12:11:22] isso
[2017-11-16 12:12:08] mas olhe l√° as sa√≠das da PROM como o DS mapeia
[2017-11-16 12:12:08] e uma das outras duas (A1 e A0) est√° ligada no pino de sa[ida de dado serial do 8085 (bit esse que pode ser escrito com a instru√ß√£o SIM)
[2017-11-16 12:12:51] Isso, n√£o me lembro direito se era o A0 ou A1... e se esses tinham conex√£o tbm com os da segunda PROM
[2017-11-16 12:14:52] Lembro que as entradas A4/A3/A2 est√£o ligadas nas duas PROMS
[2017-11-16 12:18:37] photo: /home/felipe/devel/github_ArqueologiaDigital/Telegram_logs/media/Arqueologia_Digital_e_Preserva√ß√£o_Hist√≥rica_por_meio_da_Emula√ß√£o_de_Dispositivos_Eletr√¥nicos/download_805512915_40966.jpg
[2017-11-16 12:26:41] photo: /home/felipe/devel/github_ArqueologiaDigital/Telegram_logs/media/Arqueologia_Digital_e_Preserva√ß√£o_Hist√≥rica_por_meio_da_Emula√ß√£o_de_Dispositivos_Eletr√¥nicos/download_804725372_69292.jpg
[2017-11-16 12:29:22] Aqui vai um chute pro alto de olhos fechados: assumindo que uma das PROMs √© para gerenciar o acesso n√£o-DMA do 8275 ao barramento, talvez a segunda PROM seja para efetuar o mesmo com rela√ß√£o ao 8251??
[2017-11-16 12:29:40] E aqui encerro a minha sess√£o de devaneios.
[2017-11-16 12:35:22] A 8251 √© bem mais simples (depois eu posto o datasheet). Precisa s√≥ de um endere√ßo e um chip select (provavelmente gerado pela primeira)
[2017-11-16 12:36:51] A 8275 √© mais complexa, porque precisa simular o DMA e transferir somente os dados, ignorando o fetch das instru√ß√µes
[2017-11-16 12:37:22] Primeira -> Prom
[2017-11-16 12:42:38] O DS da 8251 j√° temos aqui, DQ. Eu baseei meu "chute" puramente na l√≥gica de controle dele; por isso assumi q eventualmente, pudesse ser uma possibilidade a segunda PROM servir pra gerenciar essa l√≥gica de acesso, para o caso da comunica√ß√£o com a porta serial.
[2017-11-16 14:12:43] photo: /home/felipe/devel/github_ArqueologiaDigital/Telegram_logs/media/Arqueologia_Digital_e_Preserva√ß√£o_Hist√≥rica_por_meio_da_Emula√ß√£o_de_Dispositivos_Eletr√¥nicos/download_804729315_47772.jpg
[2017-11-16 14:14:12] Sim, s√£o os famosos POP. Mas tem tamb√©m uns PUSHs, que eu acho que o apnote n√£o falava.
[2017-11-16 14:16:05] photo: /home/felipe/devel/github_ArqueologiaDigital/Telegram_logs/media/Arqueologia_Digital_e_Preserva√ß√£o_Hist√≥rica_por_meio_da_Emula√ß√£o_de_Dispositivos_Eletr√¥nicos/download_804730427_48646.jpg
[2017-11-16 14:16:36] Se n√£o me engano, isto gera a linha em branco entre a parte que vem da Ram e a linha de status.
[2017-11-16 14:17:02] Note o SIM para ativar a transfer√™ncia
[2017-11-16 14:19:01] to pensando aqui como √© que eu vou estruturar isso na emula√ß√£o...
[2017-11-16 14:20:41] sim! Por conta do 2020 (espa√ßo espa√ßo) no registrador DE
[2017-11-16 14:24:16] Eu n√£o lembro se foi neste projeto ou em outro, mas tinha um truque de ter uma marca indicando que estava pendente a linha se apagada e os pushes de refresh eram usados para apagar... quando concluir o disassembler a gente vai saber.
[2017-11-16 14:47:18] Exato, notei isso! Ent√£o s√£o 80 POP's/PUSH's a cada transfer√™ncia, correto?
[2017-11-16 14:50:25] O texto fala de setar uma linha do 8085 para sinalizar o in√≠cio da transfer√™ncia. "Coincidentemente" (uma ova!), ele faz uso do pino SOD que, como vimos l√° no hardware, est√° ligado √† entrada A0 da primeira PROM... faz sentido?
[2017-11-16 14:51:11] photo: /home/felipe/devel/github_ArqueologiaDigital/Telegram_logs/media/Arqueologia_Digital_e_Preserva√ß√£o_Hist√≥rica_por_meio_da_Emula√ß√£o_de_Dispositivos_Eletr√¥nicos/download_804730964_48635.jpg
[2017-11-16 14:52:01] DQ est√° retirando o "pano preto" da PROM para n√≥s!! üòÉ
[2017-11-16 14:52:25] Sem essa AN a gente pastaria pra saber isso.
[2017-11-16 14:53:35] Agora a listagem 4.2 come√ßa a tomar mais sentido ainda.
[2017-11-16 14:55:31] Na realidade s√£o 40 PUSHs ou POPs, pois cada um move 2 bytes e s√£o 80 colunas.
[2017-11-16 14:56:12] E o firmware usa mesmo um truque: se o primeiro byte da linha √© 0xFF, a linha √© limpada no refresh.
[2017-11-16 14:57:05] Um outro truque √© rolar sem mover os dados: tem uma vari√°vel que indica qual a primeira linha.
[2017-11-16 15:07:11] üëçüèªüëçüèª
[2017-11-16 15:12:31] Tem uma √∫nica leitura em C001. Acho que √© para limpar a interrup√ß√£o de retra√ßo (RST6.5)
[2017-11-16 15:31:22] que treta esse LEPUS-200, hein, DQ! Temos que puxar a orelha desse Daniel...
[2017-11-16 15:33:05] Ent√£o voc√™ vai gostar desta: a linha em branco n√£o √© feita com aqueles PUSHs. √â apenas *um* POP que move da EProm para a 8275 um byte de controle especial end of row / stop dma.
[2017-11-16 15:33:06] Eu busquei alguma pista desse seu conversor 1s-usb no google, mas n√£o encontrei nada. S√≥ tem um modelo de mesmo nome comercializado pela Comm5. Custa o olho da cara. Acho q pr√≥xima vez teremos q olhar naqueles jumpers internos at√© onde o sinal Tx consegue chegar
[2017-11-16 15:36:13] ou comprar / arrumar / emprestar um adaptador bem documentado
[2017-11-16 15:36:17] Vou ter que dar uma parada agora, mas j√° foi quase toda a parte do v√≠deo.
[2017-11-16 15:36:35] :-)
[2017-11-16 21:35:39] Sem luz desde as 18:30h üòí
